const IMAGE_LIST = {
  arrow: '16LKZLA\\K^LZLBZLBZLLLLLLLLLLLLG',
  block:
    '16AXNAMYezeYNZnZNedeNqeYlYeqNqeYgNgYeqNqeYfMeYMfYeqNqeYfMeYMfYeqNqeYeMfZMeYeqNqeYeMeNYMeYeqNqeYeNfNeYeqNqeYlYeqNedeNZnZNYezeYMAXNA',
  characters:
    '144FPKQLPLLLLLLLLJNhNGNiNHNhNJPKQLPLPKQLPIMlMEMmMFMlMGNhNGNiNHNhNHNhNGNiNHNhNGMlMEMmMFMlMFMlMEMmMFMlMFMlMEMmMFMlMFMlMEMmMFMlMFMlMEMmMFMlMFMlMEMmMFMlMFMesereMEMeugMFMlMFMlMEMmMFMlMFMlMEMmMFMlMEMqeveqMEMufNEMqlqMEMereseMEMeugMFMlMFMereseMEMeugMFMlMFMrMrMrMFMqMseMqMFMlMEMqeveqMEMufNEMqlqMDMqeveqMEMufNEMqlqMFMqMrMqMGMqMuMHMjMGMrMrMrMFMqMseMqMFMlMFMrMrMrMFMqMseMqMFMlMFOtOGMtNHOtOFNqMrMqNFMqMuMHNhNGNqMrMqNFMqMuMHNhNFM[P[MGPYMGM[P[MDMZMtMZMFMtNHMZPZMEMZMtMZMFMtOGMZPZMDMZMZrZMZMFN[MFMZM^MZMCOYPYMYqMEQYNFMqM^OCMqYMYPYOFQ[MEO^MqMCMZM^MZMFMYMZMFMZM^MZMCMrM]NqMDMr\\MqMFN]MrMCMqN]MrMEMqNZMYqMEMrM]NEMqTqMGMYMqNGMqTqMEUANEO\\MHUDNAUGN\\MqMFUGN^NHOqMIN^NHMqNZMISHMZNqMIMZNqMJSIMqNZMHMrNrMIMrNJMrNrMJOrMHMrNrMHMrOJMrOJMrNrMJOrMJPKQLPLLLLLLLLJNhNGNiNHNhNJPKQLPLPKQLPIMlMEMmMFNjNGNhNGNiNHNhNHNhNGNiNHNhNGMlMEMmMFMlMFMlMEMmMFNjNFMlMEMmMFNjNFMgqhMEMmMFMlMFMlMEMmMFMlMFMlMEMmMFMlMFMeveMEMerjMFMlMFMgqhMEMmMFMlMFMgqhMEMmMFMlMEMqeveqMEMshMeMDMqlqMEMeveMEMerjMFMlMFMeveMEMerjMFMlMFMeqMrMqeMFMqMqgMqMeMDMgNgMEMqeveqMEMshMeMDMqlqMDMqeveqMEMshMeMDMqlqMFMqMrMqMGMqMqfrMfMEMeMfMeMGMeqMrMqeMFMqMqgMqMeMDMgNgMFMeqMrMqeMFMqMqgMqMeMDMgNgMGNtNHMtNfMFNhNHMqMrMqMGMqMqfrMfMEMeMfMeMHMqMrMqMGMqMqfrMfMEMeMfMeMGMZPZMHSeMEMYMhMYMFMYMtMYMGMtNfMEMYMhMYMFMYMtMYMGMtNfMEMYMhMYMFM[r[MGMYNYMANFMZMfMZMFMYQYNHSfMDMYMgPFNYQYMGTfMDMYNgOEMqN\\NqMFMZMqMHMqNYNYNqMEO\\MrMFMZqNqODMrNeQEMrM\\OGM[MrOEQeNrMCMrN\\NrMFMYMqMGMrN\\NrMCMrM\\PFMsPFPYNYMrMDP\\MrMEMqMZNqMFMrMYNYPDOrNrOGMrNHOrNrOEOqNrMIOYqMIMrNqOGMrNqOGMrNYNGOqNrMIMqNqMKMqMLMqNqMKOqMJMqNqMJMqOKMqOJMqOqMKOqME',
  crate:
    '16AXNANYnYOZVZNeNeqjNeNeMfqetfMeNeMfteqfMeNeNjqeNeNZVZOYnYOYXYO[MZM]OYNYMYNYPYNYMZMYNYMZMYNYPYNYMYNYO]MZM[NAXNA',
  'gong-trigger':
    '16XQsevesNqfTfqNfOhNgNfNeteNfNfMeqPqeMfMAMeMeqMrMqeMeMBMeMeqPqeMeMBMeNeteNeMBMeMAMhMAMeMBMeMBPBMeMBMeMHMeMBMeMHMeMBMeMAQBMeMBMeMBQAMeMBOHOA',
  gong: '16F\\JZtZGYfvYEZe^rYC\\jYrYB[lYqYBZnZBYhthYBYgq\\qgYBYgqYrYqgYBYgq\\qgYBZgtgZBeZlZeCeZjZeEe`eGlD',
  'hole-filled':
    '16LLLAMANAMFXNANYnYOZVZNeNeqjNeNeMfqetfMeNeMfteqfMeNeNjqeNeNZVZOYnYOYXYMAM[MZM]MCMAYMYNYNAMLF',
  hole: '16LLLYA\\AYGbEYA`AYDdCYAbAYB\\MYNYM\\A\\MYMZMYM\\AZMYMYNYMYMZCZTZCZMYRYMZCZTZEYTYHRLI',
  'key-holder':
    '16LFdCYpYAZ{e\\qbe\\qYeYhYeYe\\qZfZfZe\\qYgZgYe\\qYgYhYe\\qZfZfZe\\qYeYhYeYe\\qbe\\oq[edqZpfYAdZA',
  key: '16FtKqPqIqMhMqHqMYNeMqHqMYNeMqHqM\\MqIqNYMqJqMeYMqJqNYMqJqMZMqKqNqLArLLLLLK',
  lock: '16FPKMtMIMq\\qMGMZhYqMEMZeqNYeYqMCNYeqPYeYqMAOYeqPYeYrPYfqNYfYrO[eqNYeYfqMYM\\ereYgMYAYM\\fYgMYCYM[MYgMYEYMYMfYeMYGYMhMYIYPYK\\F',
  rock: '16FPIOhNFMeresfMDMerYeueMCMfqZesfqMBMgqZgYfMBMiYgZNBNYkZqNBNYiZsMBMqgriqMAMqeqYgqMYgMAMYfqMYeqMYgMAMZeqMYfNYfMAOZNYPYMqBPEOLF',
  sand: '16ZMYV]MYV]MYW\\MYMYU^MYU^MZU^MZV]MYV]XM\\XM\\X[XN[XM\\X]XZ',
  trap: '16DNANANGVEQrQCNYM[N[NBMqMrYrMrMqMANZM\\q\\OqMrMYsMrMqO]N]OsNsMqYsN\\qYM]qYOqMqOsYrNAqZN[M[MqBNYqMsMrOCO[rZNFQrMJPF',
};

const TILE_SIZE = 16; // Original tile size in pixels
let zoomFactor = 1; // Display size for each tile. Zoom whole game depending on screen size
const LEVEL_WIDTH = 20;
const LEVEL_HEIGHT = 10;

const canvas = document.getElementById('gameCanvas');
const backgroundCanvas = document.getElementById('gameBackgroundCanvas');
const ctx = canvas.getContext('2d');
const backgroundCtx = backgroundCanvas.getContext('2d');

// Orientation constants
const ORIENTATION_UP = 0;
const ORIENTATION_RIGHT = 1;
const ORIENTATION_DOWN = 2;
const ORIENTATION_LEFT = 3;

const COLOR_SETS = {
  blueGreenSet: ['#024d53', '#599dbc', '#72d1c7', '#a9ffe6'],
  crateSet: ['#000', '#893a25', '#f89e61', '#863422'],
  greenSet: ['#000', '#527f67', '#a2ce69', '#d6f8e1'],
  sandSet: ['#cab168', '#e5d09e'],
  bronzeSet: ['#000', '#811c07', '#ca6137', '#ffb59c'],
};

// Référencer les sets de couleurs dans DEFAULT_TILE_COLORS
const DEFAULT_TILE_COLORS = {
  arrow: COLOR_SETS.blueGreenSet,
  block: COLOR_SETS.blueGreenSet,
  character: ['#000', '#e42c37', '#c07548', '#fdcbb0'],
  crate: COLOR_SETS.crateSet,
  lock: COLOR_SETS.greenSet,
  key: COLOR_SETS.greenSet,
  'key-holder': COLOR_SETS.blueGreenSet,
  rock: COLOR_SETS.blueGreenSet,
  sand: COLOR_SETS.sandSet,
  gong: COLOR_SETS.bronzeSet,
  'gong-trigger': COLOR_SETS.bronzeSet,
};

// Level data with specific tile color variations
let levelData = [
  { tile: 'arrow', x: 4, y: 7 },
  { tile: 'arrow', x: 4, y: 6, orientation: ORIENTATION_LEFT },
  { tile: 'arrow', x: 2, y: 4, orientation: ORIENTATION_LEFT },
  { tile: 'crate', x: 3, y: 6 },
  { tile: 'crate', x: 4, y: 6 },
  { tile: 'rock', x: 11, y: 2 },
  { tile: 'rock', x: 1, y: 3 },
  { tile: 'rock', x: 2, y: 3 },
  { tile: 'rock', x: 3, y: 3 },
  { tile: 'rock', x: 4, y: 3 },
  { tile: 'rock', x: 5, y: 3 },
  { tile: 'rock', x: 6, y: 3 },
  { tile: 'rock', x: 7, y: 3 },
  { tile: 'rock', x: 12, y: 3 },
  { tile: 'rock', x: 13, y: 3 },
  { tile: 'rock', x: 14, y: 3 },
  { tile: 'rock', x: 15, y: 3 },
  { tile: 'rock', x: 16, y: 3 },
  { tile: 'rock', x: 17, y: 3 },
  { tile: 'rock', x: 18, y: 3 },
  { tile: 'rock', x: 4, y: 4 },
  { tile: 'rock', x: 5, y: 4 },
  { tile: 'rock', x: 14, y: 4 },
  { tile: 'rock', x: 16, y: 4 },
  { tile: 'rock', x: 1, y: 5 },
  { tile: 'rock', x: 2, y: 5 },
  { tile: 'rock', x: 5, y: 5 },
  { tile: 'rock', x: 14, y: 5 },
  { tile: 'rock', x: 16, y: 5 },
  { tile: 'block', x: 8, y: 3, orientation: ORIENTATION_LEFT },
  { tile: 'block', x: 9, y: 3, orientation: ORIENTATION_LEFT },
  {
    tile: 'block',
    x: 10,
    y: 3,
    color: COLOR_SETS.greenSet,
    orientation: ORIENTATION_LEFT,
  },
  { tile: 'lock', x: 11, y: 3 },
  { tile: 'key-holder', x: 15, y: 4 },
  { tile: 'key', x: 15, y: 4 },
  { tile: 'gong-trigger', x: 1, y: 4 },
  { tile: 'gong', x: 15, y: 5 },
];
