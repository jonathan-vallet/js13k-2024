<html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>13 steps to death</title><style>body,
      html {
        margin: 0;
        padding: 0;
        overflow: hidden;
        height: 100%;
        width: 100%;
      }

      body:not(.game) {
        .-game {
          display: none;
        }
      }
      body:not(.editor) {
        .-editor {
          display: none;
        }
      }
      body:not(.characterSelection) {
        .-characterSelection {
          display: none;
        }
      }

      #game {
        position: relative;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }

      #gBC {
        position: absolute;
        top: -5%;
        left: -5%;
        width: 110%;
        height: 110%;
        z-index: -1;
        object-fit: cover;
        filter: blur(15px) brightness(50%);
      }</style></head><body oncontextmenu="return!1"><div id="game"><canvas id="gBC"></canvas><canvas id="uiCanvas" class="-game"></canvas><div id="editor" class="-editor"><div id="editorUi"><label>Tile: <select id="eTS"></select></label> <label>Orientation: <select id="eOS"><option value="0">Up</option><option value="1">Right</option><option value="2">Down</option><option value="3">Left</option></select></label> <button id="editorTestLevelButton">Test level</button><p id="editorMessage"></p></div></div><canvas id="gC"></canvas><script>!function(){"use strict";let e=e=>document.querySelector(e),t=(e,t)=>localStorage.setItem(e,t),M=e=>localStorage.getItem(e),n=Math.min,r=Math.max;const l={bG:["#024d53","#599dbc","#72d1c7","#a9ffe6"],crate:["#000","#893a25","#f89e61","#c16c43"],g:["#000","#527f67","#a2ce69","#d6f8e1"],s:["#e5d09e","#cab168"],br:["#000","#811c07","#ca6137","#ffb59c"],silver:["#000","#014a5d","#7ddbff","#d0ffea"],gold:["#000","#5e3718","#d8aa3b","#fdffaa"],p:["#341b2e","#6a5979","#937cb2","#afbeff"]},i=["#f9ece6","#f0d3c5","#e3b38d","#bc8d57","#a96c4f","#704733"],o=["#dfa245","#9e6631","#ac422a","#998880","#e4e1ce","#53381a","#270e11"],a=["#d14244","#f1592a","#fbd54e","#017949","#c9dfed","#1b4872","#724559"],c={arrow:{r:"16LKZLA\\K^LZLBZLBZLLLLLLLLLLLLG",co:l.bG,limit:0,iS:!0},block:{r:"16AXNAMYezeYNZnZNedeNqeYlYeqNqeYgNgYeqNqeYfMeYMfYeqNqeYfMeYMfYeqNqeYeMfZMeYeqNqeYeMeNYMeYeqNqeYeNfNeYeqNqeYlYeqNedeNZnZNYezeYMAXNA",co:l.bG,cCO:!0},"block-trigger":{r:"16AXNAMYezeYNZnZNedeNqeYlYeqNqeYgNgYeqNqeYfMeYMfYeqNqeYfMeYMfYeqNqeYeMfZMeYeqNqeYeMeNYMeYeqNqeYeNfNeYeqNqeYlYeqNedeNZnZNYezeYMAXNA",co:l.g,cCO:!0},boulder:{r:"16LIRHNgqYqNEMgsZrMCMfrYrZsMBMesYqZtMAMfYrYq^qNfZqZuZNerYrYvYN]q[tYNtYs^MAMs[uYMBM\\q[q[MCMtYq\\MENs[NHRE",co:l.crate},crate:{r:"16AXNANYnYOZVZNeNeqjNeNeMfqetfMeNeMfteqfMeNeNjqeNeNZVZOYnYOYXYO[MZM]OYNYMYNYPYNYMZMYNYMZMYNYPYNYMYNYO]MZM[NAXNA",co:l.crate},flag:{r:"48DYLCYLCYLBZLBZLBZLCMgLMlGMlGMkHMkHMkHMkHMkHMkHMkHMkHMkHMkHMlGMkHMFfGMLCMChHMLCMLCMLCMLCMLCMLCMLCMLCMLCMLCMLCMLCMLCMLCMLCMLCMLCMLCMLCMLCMLBZLBZLBZK",co:l.br,limit:1},"gong-trigger":{r:"16XQsevesNqfTfqNfOhNgNfNeteNfNfMeqPqeMfMAMeMeqMrMqeMeMBMeMeqPqeMeMBMeNeteNeMBMeMAMhMAMeMBMeMBPBMeMBMeMHMeMBMeMHMeMBMeMAQBMeMBMeMBQAMeMBOHOA",co:[l.br,l.silver,l.gold,l.p],useOrientationForColor:!0,iS:!0},gong:{r:"16F\\JZtZGYfvYEZe^rYC\\jYrYB[lYqYBZnZBYhthYBYgq\\qgYBYgqYrYqgYBYgq\\qgYBZgtgZBeZlZeCeZjZeEe`eGlD",co:[l.br,l.silver,l.gold,l.p],useOrientationForColor:!0},"hole-filled":{r:"16LLLAMANAMFXNANYnYOZVZNeNeqjNeNeMfqetfMeNeMfteqfMeNeNjqeNeNZVZOYnYOYXYMAM[MZM]MCMAYMYNYNAMLF",co:l.crate},hole:{r:"16LLLYA\\AYGbEYA`AYDdCYAbAYB\\MYNYM\\A\\MYMZMYM\\AZMYMYNYMYMZCZTZCZMYRYMZCZTZEYTYHRLI",co:["#000","#00506e"]},"key-holder":{r:"16LFdCYpYAZ{e\\qbe\\qYeYhYeYe\\qZfZfZe\\qYgZgYe\\qYgYhYe\\qZfZfZe\\qYeYhYeYe\\qbe\\oq[edqZpfYAdZA",co:l.bG,limit:0,iS:!0},key:{r:"16FtKqPqIqMhMqHqMYNeMqHqMYNeMqHqM\\MqIqNYMqJqMeYMqJqNYMqJqMZMqKqNqLArLLLLLK",co:l.g},lock:{r:"16FPKMtMIMq\\qMGMZhYqMEMZeqNYeYqMCNYeqPYeYqMAOYeqPYeYrPYfqNYfYrO[eqNYeYfqMYM\\ereYgMYAYM\\fYgMYCYM[MYgMYEYMYMfYeMYGYMhMYIYPYK\\F",co:l.g},rock:{r:"16FPIOhNFMeresfMDMerYeueMCMfqZesfqMBMgqZgYfMBMiYgZNBNYkZqNBNYiZsMBMqgriqMAMqeqYgqMYgMAMYfqMYeqMYgMAMZeqMYfNYfMAOZNYPYMqBPEOLF",co:l.bG,iS:!0},"spawn-current":{r:"16E\\LBYAYJZBYAYJZAYAYJYAYBYBYD[F[AYAYEZCYBZAZB\\AYB\\BYA\\BZAZBYCZEYAYA[F[DYBYBYAYJYAYAZJYAYBZJYAYLB\\E",co:l.bG,limit:1},spawn:{r:"32E\\L\\LBYAYLAYAYJZBYAYIZBYAYJZAYAYJZAYAYJYAYBYBYGYAYBYBYD[F[AYB[F[AYAYEfCYBYAYErCYBZAZBhAYB[AZBtAYB\\BYAhBZA[BYAtBZAZBYCfEYAYBYCrEYAYA[F[BYA[F[DYBYBYAYGYBYBYAYJYAYAZJYAYAZJYAYBZIYAYBZJYAYLAYAYLB\\L\\E",co:l.bG},trap:{r:"16DNANANGVEQfQCNYM[N[NBMeMfYfMfMeMANZM\\e\\OeMfMYgMfMeO]N]OgNgMeYgN\\eYM]eYOeMeOgYfNAeZN[M[MeBNYeMgMfOCO[fZNFQfMJPF",co:["#306710","#000","#b1712e"]},s:{r:"16ZMYV]MYV]MYW\\MYMYU^MYU^MZU^MZV]MYV]XM\\XM\\X[XN[XM\\X]XZ",co:l.s,limit:0},characters:{r:"144FPKQLPLLLLLLLLJNhNGNiNHNhNJPKQLPLPKQLPIMlMEMmMFMlMGNhNGNiNHNhNHNhNGNiNHNhNGMlMEMmMFMlMFMlMEMmMFMlMFMlMEMmMFMlMFMlMEMmMFMlMFMlMEMmMFMlMFMlMEMmMFMlMFMe[eZeMEMe]gMFMlMFMlMEMmMFMlMFMlMEMmMFMlMEMYe^eYMEM]fNEMYlYMEMeZe[eMEMe]gMFMlMFMeZe[eMEMe]gMFMlMFMZMZMZMFMYM[eMYMFMlMEMYe^eYMEM]fNEMYlYMDMYe^eYMEM]fNEMYlYMFMYMZMYMGMYM]MHMjMGMZMZMZMFMYM[eMYMFMlMFMZMZMZMFMYM[eMYMFMlMFO\\OGM\\NHO\\OFNYMZMYNFMYM]MHNhNGNYMZMYNFMYM]MHNhNFMsPsMGPqMGMsPsMDMrM\\MrMFM\\NHMrPrMEMrM\\MrMFM\\OGMrPrMDMrMrZrMrMFNsMFMrMvMrMCOqPqMqYMEQqNFMYMvOCMYqMqPqOFQsMEOvMYMCMrMvMrMFMqMrMFMrMvMrMCMZMuNYMDMZtMYMFNuMZMCMYNuMZMEMYNrMqYMEMZMuNEMYTYMGMqMYNGMYTYMEUANEOtMHUDNAUGNtMYMFUGNvNHOYMINvNHMYNrMISHMrNYMIMrNYMJSIMYNrMHMZNZMIMZNJMZNZMJOZMHMZNZMHMZOJMZOJMZNZMJOZMJPKQLPLLLLLLLLJNhNGNiNHNhNJPKQLPLPKQLPIMlMEMmMFNjNGNhNGNiNHNhNHNhNGNiNHNhNGMlMEMmMFMlMFMlMEMmMFNjNFMlMEMmMFNjNFMgYhMEMmMFMlMFMlMEMmMFMlMFMlMEMmMFMlMFMe^eMEMeZjMFMlMFMgYhMEMmMFMlMFMgYhMEMmMFMlMEMYe^eYMEM[hMeMDMYlYMEMe^eMEMeZjMFMlMFMe^eMEMeZjMFMlMFMeYMZMYeMFMYMYgMYMeMDMgNgMEMYe^eYMEM[hMeMDMYlYMDMYe^eYMEM[hMeMDMYlYMFMYMZMYMGMYMYfZMfMEMeMfMeMGMeYMZMYeMFMYMYgMYMeMDMgNgMFMeYMZMYeMFMYMYgMYMeMDMgNgMGN\\NHM\\NfMFNhNHMYMZMYMGMYMYfZMfMEMeMfMeMHMYMZMYMGMYMYfZMfMEMeMfMeMGMrPrMHSeMEMqMhMqMFMqM\\MqMGM\\NfMEMqMhMqMFMqM\\MqMGM\\NfMEMqMhMqMFMsZsMGMqNqMANFMrMfMrMFMqQqNHSfMDMqMgPFNqQqMGTfMDMqNgOEMYNtNYMFMrMYMHMYNqNqNYMEOtMZMFMrYNYODMZNeQEMZMtOGMsMZOEQeNZMCMZNtNZMFMqMYMGMZNtNZMCMZMtPFM[PFPqNqMZMDPtMZMEMYMrNYMFMZMqNqPDOZNZOGMZNHOZNZOEOYNZMIOqYMIMZNYOGMZNYOGMZNqNGOYNZMIMYNYMKMYMLMYNYMKOYMJMYNYMJMYOKMYOJMYOYMKOYME",co:["#000",i[0],o[0],a[0]],limit:0},spikes:{r:"16LEpeBe|qeA|sArgqgqgrAreMeqeMeqeMerArgqgqgrA|sArgqgqgrAreMeqeMeqeMerArgqgqgrA|sArgqgqgrAreMeqeMeqeMerArgqgqgrB|qB",co:l.bG},"switch-off":{r:"16LLIpfBedeBeZxZeBeYzYeBeYs\\sYeBeYs\\sYeBeYs\\sYeBeYzYeBeYzYeBeZxZeBedeBpfLLI",co:[l.p,l.br,l.silver,l.gold],useOrientationForColor:!0},"switch-on":{r:"16CVEMexeMDMqftfqMCeMqeqPqeqMeBeMqeqPqeqMeBeMqeqPqeqMeBeMqftfqMeBeMexeMeBeNlNeBeMqZereZqMeBeMeqZfZqeMeBeMYerfreYMeBeNYe\\eYNeBeXeBiDiLE",co:l.p,co:[l.p,l.br,l.silver,l.gold],useOrientationForColor:!0},"switch-trigger":{r:"16Zp[pfYplTkMxMjMxMjMrPrMjMrPrMjMrPrMjMxMjMxMjM`MjYTYk`hYpf[pZ",co:l.p,co:[l.p,l.br,l.silver,l.gold],useOrientationForColor:!0},"sound-off":{r:"16FMLBMeMLMfMBMCMDMgMAMYMAMYMANhMAMYMAMYNjMBMYMYMAMjMBM[MAMeYeYeYMCMYMBMYeYeYeMCMYMBM^MBM[MAM^MBMYMYMBN\\MAMYMAMYMCM[MAMYMAMYMDMZMBMCMFMYMLBMI",co:l.p,limit:0},"sound-on":{r:"16FMLBMeMLMfMBNGMgMAMfMDNhMBMfMBMjMCMfMAMjMDMeMAMeYeYeYMDMfNYeYeYeMDMfN^MDMeMAM^MCMfMBN\\MBMfMEM[MAMfMGMZMBNIMYMLBMI",co:l.g,limit:0}},s=16,Y=13,f=20,N=10,u={flag:200,spawn:600},g=225,h=125,d=300,A=400,q=0,Z=1,L=2,E=3,p=[];["","-6N-F-N-13N-3N-7N7Bz2CzMN7-2GAz-N2-6NLN-2N4-2N-6NHN-6E2-17A-2O","-2N-3N5-9N-E-J-MCxBx2By-7N-3N5-By-7N-N-N5-N-5N3-E-P-2JE-N-5LJ2-E-N5-N-5N11HN-2F-2G-5Q5ON","-6NGN-5EQN2-6N-N-5N-N2-4F-M-M-2O-2Cz-CzL-6N-N-2E-2N-NQ-6N5CN3-NQ-8N-7NQ-8N3JN5Q-8NL-4HQ2P","-7Bz8N-9NEN5CN-6O-2Q-Q-4H-6E-3Q-Q-5P-5W-3NTN7MN-7V-2WN-6N3VN4UN3-3F-2N3GN4L-N2","-BxByBxGxNGy-4N-L-N-3CBxBVM-5N2HN2-2NMNQN9QN4GCQO-9PQHy-FN-NQN6WN2QN5-NVN-4N-4N5-3N-4N-2E-HxLN7-4N-4N4","G-T6-DOH-2UxM-FN10-ND-N4-4N6-E-2N-7NWzVxHyEWx-E-2N-4D-2N2PNPN-N-2N-3N2-E-2EN3-N-2N-3LUz-7NHxN-TV-2GyWzT2JTJ-3NWNTGxT-N2"].forEach((e=>{const t=K(e);p.push(t)}));var B=function(){var e,t,M,n,r,l=function(e){return Math.sin(6.283184*e)},i=function(e){return.003959503758*2**((e-128)/12)},o=function(e,t,M){var n,r,l,o,c,s,Y=a[e.i[0]],f=e.i[1],N=e.i[3]/32,u=a[e.i[4]],g=e.i[5],h=e.i[8]/32,d=e.i[9],A=e.i[10]*e.i[10]*4,q=e.i[11]*e.i[11]*4,Z=e.i[12]*e.i[12]*4,L=1/Z,E=-e.i[13]/16,p=e.i[14],B=M*2**(2-e.i[15]),m=new Int32Array(A+q+Z),F=0,C=0;for(n=0,r=0;n<A+q+Z;n++,r++)r>=0&&(r-=B,c=i(t+(15&(p=p>>8|(255&p)<<4))+e.i[2]-128),s=i(t+(15&p)+e.i[6]-128)*(1+8e-4*e.i[7])),l=1,n<A?l=n/A:n>=A+q&&(l=(1-(l=(n-A-q)*L))*3**(E*l)),o=Y(F+=c*l**N)*f,o+=u(C+=s*l**h)*g,d&&(o+=(2*Math.random()-1)*d),m[n]=80*o*l|0;return m},a=[l,function(e){return e%1<.5?1:-1},function(e){return e%1*2-1},function(e){var t=e%1*4;return t<2?t-1:3-t}];this.init=function(l){e=l,t=l.endPattern,M=0,n=l.rowLen*l.patternLen*(t+1)*2,r=new Int32Array(n)},this.generate=function(){var i,c,s,Y,f,N,u,g,h,d,A,q,Z,L,E=new Int32Array(n),p=e.songData[M],B=e.rowLen,m=e.patternLen,F=0,C=0,w=!1,x=[];for(s=0;s<=t;++s)for(u=p.p[s],Y=0;Y<m;++Y){var v=u?p.c[u-1].f[Y]:0;v&&(p.i[v-1]=p.c[u-1].f[Y+m]||0,v<17&&(x=[]));var O=a[p.i[16]],y=p.i[17]/512,b=2**(p.i[18]-9)/B,D=p.i[19],k=p.i[20],G=43.23529*p.i[21]*3.141592/44100,P=1-p.i[22]/255,H=1e-5*p.i[23],I=p.i[24]/32,J=p.i[25]/512,S=6.283184*2**(p.i[26]-9)/B,Q=p.i[27]/255,T=p.i[28]*B&-2;for(A=(s*m+Y)*B,f=0;f<4;++f)if(N=u?p.c[u-1].n[Y+f*m]:0){x[N]||(x[N]=o(p,N,B));var R=x[N];for(c=0,i=2*A;c<R.length;c++,i+=2)E[i]+=R[c]}for(c=0;c<B;c++)(d=E[g=2*(A+c)])||w?(q=G,D&&(q*=O(b*g)*y+.5),C+=(q=1.5*Math.sin(q))*(Z=P*(d-C)-(F+=q*C)),d=3==k?C:1==k?Z:F,H&&(d=(d*=H)<1?d>-1?l(.25*d):-1:1,d/=H),w=(d*=I)*d>1e-5,L=d*(1-(h=Math.sin(S*g)*J+.5)),d*=h):L=0,g>=T&&(L+=E[g-T+1]*Q,d+=E[g-T]*Q),E[g]=0|L,E[g+1]=0|d,r[g]+=0|L,r[g+1]+=0|d}return++M/e.numChannels},this.createAudioBuffer=function(e){for(var t=e.createBuffer(2,n/2,44100),M=0;M<2;M++)for(var l=t.getChannelData(M),i=M;i<n;i+=2)l[i>>1]=r[i]/65536;return t},this.createWave=function(){var e=44+2*n-8,t=e-36,M=new Uint8Array(44+2*n);M.set([82,73,70,70,255&e,e>>8&255,e>>16&255,e>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&t,t>>8&255,t>>16&255,t>>24&255]);for(var l=0,i=44;l<n;++l){var o=r[l];o=o<-32767?-32767:o>32767?32767:o,M[i++]=255&o,M[i++]=o>>8&255}return M},this.getData=function(e,t){for(var M=2*Math.floor(44100*e),n=new Array(t),l=0;l<2*t;l+=1){var i=M+l;n[l]=e>0&&i<r.length?r[i]/32768:0}return n}};const m={1:"010110010010111",2:"01101001001001001111",3:"11100001001100011110",4:"00110101100111110001",5:"11111000111100011110",6:"01101000111010010110",7:"11110001001000100010",8:"01101001011010010110",9:"01101001011100010110",0:"01101001100110010110",A:"01101001111110011001",B:"110101110101110",C:"011100100100011",D:"110101101101110",E:"111100111100111",F:"111100111100100",G:"01111000101110010110",H:"10011001111110011001",I:"111010010010111",K:"10011010110010101001",L:"100100100100111",M:"1000111011101011000110001",N:"10011101101110011001",O:"01101001100110010110",P:"11101001111010001000",R:"11101001111010101001",S:"01111000011000011110",T:"111010010010010",U:"10011001100110010110",V:"1000110001010100101000100",W:"1010110101101010101001010",Y:"10011001111100011110"," ":"000000000000000",":":"000010000010000",x:"000000101010101"};function F(e){let t=0;for(let M=0;M<e.text.length;M++){const n=e.text.charAt(M),r=m[n],l=r.length/5;for(let n=0;n<5;n++)for(let i=0;i<l;i++){"1"===r[n*l+i]&&e.ctx.rect((e.x+(i+t+e.hspacing*M))*G,(e.y+n)*G,G,G)}t+=l}}function C(e){const t={ctx:O,x:0,y:0,text:"",vspacing:0,hspacing:1,color:"#fff",...e},M=t.text.split("\n"),n=5*G;t.ctx.beginPath();for(let e=0;e<M.length;e++){const r=M[e],l=t.x,i=t.y+(n+t.vspacing*G)*e;F({ctx:t.ctx,x:l,y:i,text:r,hspacing:t.hspacing})}t.ctx.fillStyle=t.color,t.ctx.fill()}const w=e("#uiCanvas"),x=w.getContext("2d"),v=e("#gC"),O=v.getContext("2d"),y=e("#gBC"),b=y.getContext("2d");let D,k="menu",G=1,P=0,H=0;const I=[];let J=1,S=e("#eTS"),Q=e("#eOS"),T={x:-1,y:-1},R=document.createElement("audio"),j=new B,z=[];function U(e){const t=function(e){const t="A".charCodeAt(0),M=[],n=parseInt(e.match(/^\d+/)[0],10);e=e.replace(/^\d+/,"");for(let n=0;n<e.length;++n){const r=e[n].charCodeAt(0)-t,l=Math.floor(r/12),i=r%12+1;M.push(...Array(i).fill(l))}return{pixels:M,imageWidth:n}}(c[e].r);z=t.pixels;const M=function(e,t){const M=[];for(let n=0;n<e.length;n+=t)M.push(e.slice(n,n+t));return M}(t.pixels,t.imageWidth),n=function(e,t,M){const n=[],r=e.length,l=e[0].length;for(let i=0;i<r;i+=M)for(let r=0;r<l;r+=t){const l=[];for(let n=0;n<M;n++)l.push(e[i+n].slice(r,r+t));n.push(l)}return n}(M,16,16);return n}function K(e){const t=[];let M=0,n=0,r=0;const l=/([A-Z\-])([xyz]?)(\d*)/g;let i;for(;null!==(i=l.exec(e));){const e=i[1],l=i[2]||"",o=parseInt(i[3]||"1",10),a="-"===e?null:V(e),c=X(l);for(let e=0;e<o;e++){let e=r%(f-2)+1,l=Math.floor(r/(f-2))+1;a&&(t.push({tile:a,x:e,y:l,o:c}),"spawn-current"===a&&(M=e,n=l)),++r}}for(let e=0;e<t.length;e++){const M=t[e];["crate","boulder"].includes(M.tile)&&(t.splice(e,1),t.push(M))}return{characterInitialX:M,characterInitialY:n,levelData:t}}function X(e){switch(e){case"x":return 1;case"y":return 2;case"z":return 3;default:return 0}}function V(e){return Object.keys(c)[e.charCodeAt(0)-"A".charCodeAt(0)]}function W(e){let t="",M="",n="",r=0;for(let e=1;e<=N-2;e++)for(let l=1;l<=f-2;l++){const i=ce(l,e),o=$(i?.tile),a=_(i?.o);o===M&&a===n?++r:(t+=M+n,r>1&&(t+=`${r}`),M=o,n=a,r=1)}return t+=M+n,r>1&&(t+=`${r}`),t=t.replace(/-[0-9]+$/,""),t}function V(e){return Object.keys(c)[e.charCodeAt(0)-"A".charCodeAt(0)]}function $(e){if(!e)return"-";const t=Object.keys(c).indexOf(e);return String.fromCharCode("A".charCodeAt(0)+t)}function _(e){return{1:"x",2:"y",3:"z"}[e]||""}function ee(e){for(j.init(e);j.generate()<1;);return j.createWave()}function te(e,t=!1){R.src=URL.createObjectURL(new Blob([e],{type:"audio/wav"})),R.loop=t,R.play()}function Me(){O.clearRect(0,0,v.width,v.height),"menu"===k&&function(){pt();const e=50,t=70,M=15;Lt.forEach(((n,r)=>{const l=r===Et;C({ctx:O,x:e,y:t+r*M,hspacing:2,text:n.text,color:l?"#ff0":n.isDisabled?"#999":"#000"})}))}(),"characterSelection"===k&&function(){pt();C({ctx:O,x:50,y:70,hspacing:2,text:{gender:"SELECT GENDER",skin:"SELECT SKIN COLOR",hair:"SELECT HAIR COLOR",outfit:"SELECT OUTFIT COLOR"}[Yt[ft]],color:"#000"}),0===ft?st.gender.forEach(((e,t)=>{C({ctx:O,x:50,y:85+15*t,hspacing:2,text:e.toUpperCase(),color:t===Et?"#ff0":"#000"})})):function(e,t,M,n){const r=4*G;e.forEach(((e,l)=>{O.beginPath(),O.arc(M*G+l*(3*r),n*G,r,0,2*Math.PI),O.fillStyle=e,O.fill(),l===t&&(O.lineWidth=2,O.strokeStyle="#ff0",O.stroke())}))}(st[Yt[ft]],ct[Yt[ft]],50,85);$e(L),pe=3,Ce=13,we=5,Xe()}(),"editor"===k&&(ne(J),ut()),"game"===k&&(ne(J),function(){x.fillStyle="#333",x.fillRect(0,0,w.width,w.height),C({ctx:x,x:10,y:7,text:"STEPS:"});let e=0,t=0;if(Ke>=10){const M=Ke-9;e=de(M),t=de(M)}C({ctx:x,x:40+e,y:7+t,text:""+(13-Ke),color:Ae(Ke)});const M=c.key.tiles[0],n=c.key.co||["#000","#f00","#0f0","#00f"];ie(M,n,4.5,.2,{context:x}),C({ctx:x,x:120,y:7,text:`LEVEL: ${J}`}),C({ctx:x,x:90,y:7,text:`x${P}`}),C({ctx:x,x:270,y:3,text:"E: UNDO"}),C({ctx:x,x:270,y:10,text:"R: RESET"})}(),Xe())}function ne(e){O.drawImage(y,0,0,v.width,v.height),le(p[e].levelData)}function re(e,t){const M=c[e].tiles[0],n=c[e].co,r=c[t].tiles[0],l=c[t].co;for(let e=0;e<N;e++)for(let t=0;t<f;t++)ie(M,n,t,e),0!==t&&t!==f-1&&0!==e&&e!==N-1||ie(r,l,t,e);"game"===k&&le(p[J].levelData,!0),b.drawImage(v,0,0,y.width,y.height)}function le(e,t=!1){e.forEach((e=>{const M=c[e.tile];if(t&&"key"===e.tile){const t=c["key-holder"];ie(t.tiles[0],t.co,e.x,e.y)}if("game"===k&&(t&&!M.iS||!t&&M.iS))return;ie(M.tiles[e.animationFrame||0],e.color||c[e.tile].co,e.x,e.y,{o:e.o||q,scale:e.scale||1,useOrientationForColor:c[e.tile].useOrientationForColor})}))}function ie(e,t,M,n,r={}){const{o:l=q,scale:i=e.scale||1,context:o=O,flipHorizontally:a=!1,alpha:c=1,useOrientationForColor:Y=!1}=r;o.save();const f=s*G/2;o.translate(Math.floor((M+.5)*s*G),Math.floor((n+.5)*s*G));let N=1;a&&(N=-1),o.scale(i*N,i),Y?t=t[l]:o.rotate(l*Math.PI/2),o.translate(-f,-f);for(let M=0;M<e.length;M++)for(let n=0;n<e[M].length;n++){const r=e[M][n];r>0&&(o.fillStyle=t[r-1],o.globalAlpha=c,o.fillRect(n*G,M*G,G,G))}o.restore()}function oe(e){J=e,re("s","rock"),p[J].initialData=JSON.parse(JSON.stringify(p[J].levelData)),Ke=0,P=0,D=[],me=p[J].characterInitialX,Fe=p[J].characterInitialY,Ce=me,we=Fe,$e(L),pe=1}function ae(e,t){return e>=1&&e<f-1&&t>=1&&t<N-1}function ce(e,t,M=[],n=J){let r=null,l=p[n].levelData;for(const n of l)n.x===e&&n.y===t&&(M.length>0?M.includes(n.tile)&&(r=n):r=n);return r}function se(e=[],t=J){let M=[],n=p[t].levelData;for(const t of n)e.length>0?e.includes(t.tile)&&M.push(t):M.push(t);return M}function Ye(e,t,M){p[J].levelData=p[J].levelData.filter((n=>n.tile!==e||n.x!==t||n.y!==M))}function fe(e,t,M,n={}){p[J].levelData[n.isUnder?"unshift":"push"]({tile:e,x:t,y:M,...n})}function Ne(e,t,M){ve=e,qe=e.x,Ze=e.y,Le=t,Ee=M,Oe=0}function ue(e,t,M,n){ge("block-trigger",e,t),ge("block",e,t),at("block");const r=e+M,l=t+n,i=ce(r,l)?.tile;if("block"===i){const e=p[J].levelData.find((e=>e.x===r&&e.y===l&&"block"===e.tile));if(e){const t=e.o||q;let M=0,n=0;t===E?M=-1:t===Z?M=1:t===q?n=-1:t===L&&(n=1),setTimeout((()=>{ue(r,l,M,n)}),120)}}}function ge(e,t=null,M=null,n=null,r=()=>{},l=g){p[J].levelData.filter((r=>!(r.tile!==e||null!==t&&r.x!==t||null!==M&&r.y!==M||null!==n&&r.o!==n))).forEach((e=>{e.isBeingRemoved=!0,e.scale=1,e.elapsed=0,e.removalDuration=l,e.removeCallback=r}))}function he(e){let t=se("switch-on"),M=se("switch-off");t.forEach((t=>{t.o===e&&(t.tile="switch-off")})),M.forEach((t=>{if(t.o===e){t.tile="switch-on";let e=ce(t.x,t.y,["crate","boulder"]);e&&ge(e.tile,t.x,t.y)}}))}function de(e){const t=.5*e;return Math.random()*t-t/2}function Ae(e){return e<11?"rgb(255, 255, 255)":e<12?"rgb(255, 255, 0)":e<13?"rgb(255, 165, 0)":"rgb(255, 0, 0)"}!function(){for(const e in c)c[e].tiles=U(e)}();let qe,Ze,Le,Ee,pe,Be,me,Fe,Ce,we,xe,ve=null,Oe=0;function ye(e,t,M,n,r){let l=!1;switch(r?.tile){case"crate":case"boulder":if(function(e,t,M,n,r){let l=1;"boulder"===e&&(l=f);let i=0;for(;i<l;){let e=t+(i+1)*n,l=M+(i+1)*r,o=ce(e,l)?.tile||null;if(!ae(e,l)||null!==o&&!["arrow","hole","trap","hole-filled","switch-off","switch-trigger","spikes"].includes(o))break;i++}if(i>0){let l=p[J].levelData;for(const o of l)if(o.x===t&&o.y===M&&o.tile===e){Ne(o,t+i*n,M+i*r);for(let t=1;t<i;t++)setTimeout((()=>{at(e)}),h*t);return!0}}return!1}(r?.tile,e,t,M,n)){l=!0;let M=ce(e,t,["switch-trigger"]);M&&he(M.o)}break;case"lock":P>0&&(l=!0,ge("lock",e,t,null,(()=>{P--})));break;case"trap":break;case"block-trigger":const i=r.o||q;(i===E&&-1===M||i===Z&&1===M||i===q&&-1===n||i===L&&1===n)&&(l=!0,ue(e,t,M,n));break;case"gong-trigger":r.triggered||(l=!0,r.triggered=!0,ge("gong",null,null,r.o))}return l}function be(){let e={levelData:JSON.parse(JSON.stringify(p[J].levelData)),stepsPerformed:Ke,collectedKeysNumber:P,characterX:Ce,characterY:we,characterDirection:Be};0!==D.length&&JSON.stringify(e.levelData)===JSON.stringify(D[D.length-1].levelData)||D.push(e)}function De(e){if(e){const t=I.indexOf(e);-1!==t&&I.splice(t,1)}"r"===e&&(p[J].levelData=JSON.parse(JSON.stringify(p[J].initialData)),oe(J)),"e"===e&&function(){if(D.length>0){const e=D.pop();p[J].levelData=e.levelData,p[J].levelData.forEach((e=>{e.isBeingRemoved&&(e.isBeingRemoved=!1,e.scale=1)})),Ke=e.stepsPerformed,P=e.collectedKeysNumber,Ce=e.characterX,we=e.characterY,$e(e.characterDirection)}}(),lt=!1}function ke(e){switch(e){case"ArrowUp":case"z":case"w":return"up";case"ArrowDown":case"s":return"down";case"ArrowLeft":case"q":case"a":return"left";case"ArrowRight":case"d":return"right";default:return e}}let Ge,Pe,He,Ie,Je,Se,Qe,Te,Re=Ce,je=we,ze=Ce,Ue=we,Ke=0;function Xe(){ie(c.characters.tiles[Ge+9*ct.gender],c.characters.co,Ce,we,{scale:pe,flipHorizontally:Be===Z})}function Ve(e,t,M){if(He||xe||ve)return;const r=Ce+e,l=we+t;$e(M),function(e,t,M=0,n=0){if(ve||xe||He)return!1;if(!ae(e,t))return at("wall"),!1;const r=ce(e,t),l=r?.tile||null;if(r&&r.isBeingRemoved)return!1;W(p[J].levelData);let i=ye(e,t,M,n,r);return i&&(be(),at(l)),!![null,"arrow","key","key-holder","flag","trap","hole","spikes","hole-filled","spawn","spawn-current","switch-trigger","switch-off"].includes(l)||(i?(++Ke,lt=!0,et(Ce,we,i)):at("wall"),!1)}(r,l,e,t)&&(be(),Ke<Y&&(xe=!0,Re=Ce,je=we,ze=r,Ue=l,Pe=0),Ke=n(Ke+1,Y))}function We(e=null,t=null){He=!0,Je=Ce,Se=we,Qe=e||me,Te=t||Fe,Ie=performance.now()}function $e(e){Be=e,Ge=_e(Be)}function _e(e){switch(e){case q:return 2;case Z:case E:return 1;case L:return 0}}function et(e,M,n){const r=ce(e,M,["trap","switch-trigger"]),l=ce(Ce,we);switch(r?.tile){case"trap":n||"hole"===l?.tile||(at("trap"),r.tile="hole");break;case"switch-trigger":he(r.o)}switch(l?.tile){case"hole":case"spikes":We(e,M),--Ke,at("fall");break;case"flag":return t("currentLevel",J+1),oe(J+1),!1;case"spawn-current":at("spawn"),Ke=0;break;case"spawn":ce(me,Fe).tile="spawn",at("spawn"),l.tile="spawn-current",l.animationFrame=0,l.elapsed=0,me=Ce,Fe=we,Ke=0;break;case"switch-trigger":he(l.o);break;case"key":Ye("key",Ce,we),at("key"),++P}Ke>=Y&&(We(),setTimeout((()=>{Ke=0}),A))}function tt(e){!function(e){if(p[J].levelData.forEach((t=>{if(c[t.tile].tiles.length>1){t.elapsed=(t.elapsed||0)+e;const M=u[t.tile];t.elapsed>=M&&(t.animationFrame=(t.animationFrame+1)%c[t.tile].tiles.length||0,t.elapsed=0)}if(t.isBeingRemoved){t.elapsed=(t.elapsed||0)+e;const M=t.removalDuration||g;t.scale=r(1-t.elapsed/M,0),t.scale<=0&&(Ye(t.tile,t.x,t.y),t.isBeingRemoved=!1,t.removeCallback&&t.removeCallback())}})),!xe&&!He&&I.length>0){switch(I[I.length-1]){case"up":Ve(0,-1,q);break;case"down":Ve(0,1,L);break;case"left":Ve(-1,0,E);break;case"right":Ve(1,0,Z)}}xe&&function(e){Pe+=e;const t=n(Pe/d,1);Ce=Re+(ze-Re)*t,we=je+(Ue-je)*t;let M=_e(Be);switch(Math.floor(3*t)){case 0:Ge=M+3;break;case 1:Ge=M;break;case 2:Ge=M+6}t>=1&&(xe=!1,Ce=ze,we=Ue,Pe=0,Ge=M,et(Re,je))}(e);ve&&function(e){Oe+=e;const t=Math.abs(qe-Le)+Math.abs(Ze-Ee);const M=n(Oe/(h*t),1);if("boulder"===ve.tile){const e=4,n=t*e,r=Math.floor(M*n)%e;ve.o=r}if(ve.x=qe+(Le-qe)*M,ve.y=Ze+(Ee-Ze)*M,M>=1){if(ve.x=Le,ve.y=Ee,Oe=0,"crate"===ve.tile&&function(e){const t=ce(e.x,e.y,["hole","trap"]);t&&(Ye(t.tile,e.x,e.y),Ye("crate",e.x,e.y),fe("hole-filled",e.x,e.y,{isUnder:!0}),at("fall"))}(ve),["crate","boulder"].includes(ve.tile)){let e=ce(Le,Ee,["switch-trigger"]);e&&he(e.o)}if("boulder"===ve.tile){const e=Le-qe,t=Ee-Ze,M=ce(ve.x+(0!==e?Math.sign(e):0),ve.y+(0!==t?Math.sign(t):0));M&&"gong-trigger"===M.tile&&!M.triggered&&(M.triggered=!0,ge("gong",null,null,M.o),at("gong-trigger"))}ve=null}}(e)}(e-H),He&&function(){const e=performance.now()-Ie,t=n(e/A,1);t<.5?(pe=1-2*t,Ce=Je,we=Se):(pe=2*(t-.5),Ce=Qe,we=Te,Qe===me&&Te===Fe&&$e(L));t>=1&&(He=!1,Ce=Qe,we=Te,pe=1)}(),Me(),H=e,requestAnimationFrame(tt)}addEventListener("keydown",(e=>{const t=ke(e.key);"game"===k&&function(e){e&&!I.includes(e)&&I.push(e)}(t),"menu"===k&&function(e,t){switch(e){case"up":Et=(Et-1+Lt.length)%Lt.length,Lt[Et].isDisabled&&(Et=(Et-1+Lt.length)%Lt.length);break;case"down":Et=(Et+1)%Lt.length,Lt[Et].isDisabled&&(Et=(Et+1)%Lt.length)}if("Enter"===t.key){const e=Lt[Et];e.isDisabled||function(e){switch(e){case"continue":J=parseInt(M("currentLevel")),At("game");break;case"newGame":setTimeout((()=>{Et=0,At("characterSelection")}),0);break;case"levelEditor":At("editor")}}(e.action)}}(t,e),"characterSelection"===k&&function(e,t){const M=st[Yt[ft]].length,n=e=>{if(0===ft)Et=(Et+e+M)%M,ct.gender=Et;else{const t=Yt[ft];ct[t]=(ct[t]+e+M)%M,console.log(t,st[t],ct,ct[t]),c.characters.co[ft]=st[t][ct[t]]}};"up"===e||"down"===e?n("up"===e?-1:1):"left"!==e&&"right"!==e||n("left"===e?-1:1);"Enter"===t.key&&(++ft,Et=0,ft>=Yt.length&&At("game"))}(t,e),"Escape"===e.key&&At("menu")})),addEventListener("keyup",(e=>{const t=ke(e.key);"game"===k&&De(t)})),v.addEventListener("mousemove",(e=>{e.preventDefault();const t=v.getBoundingClientRect(),M=e.clientX-t.left,n=e.clientY-t.top;"editor"===k&&(T.x=Math.floor(M/(s*G)),T.y=Math.floor(n/(s*G)),ut(),Nt&&gt(e))})),v.addEventListener("mouseleave",(e=>{e.preventDefault(),"editor"===k&&(T.x=-1,T.y=-1,ut())})),v.addEventListener("mousewheel",(e=>{if(e.preventDefault(),"editor"===k){const t=r(-1,n(1,e.wheelDelta||-e.detail));Q.value=(parseInt(Q.value)+t+4)%4,ut()}})),v.addEventListener("mousedown",(e=>{Nt=!0,"editor"===k&&gt(e)})),window.addEventListener("mouseup",(e=>{Nt=!1}));var Mt={songData:[{i:[3,89,128,0,0,59,128,0,0,0,5,6,60,0,0,0,0,128,0,0,2,255,191,1,89,0,6,35,0],p:[1,1,1,1,1,1,1,1],c:[{n:[132,135,132,135,132,135,132,135,132,135,132,135,,,132,139,132,135,132,135,132],f:[]}]},{i:[3,128,128,0,0,59,128,0,0,0,12,28,216,0,0,0,0,128,0,1,2,64,195,0,31,131,6,55,1],p:[1,1,1,1,1,1,1,1],c:[{n:[120,,,,,,,,118,,,,,,,,116,,,,,,,,,,,,,,,132,,,,,,,,123,,,,,,,,128,,,,,,,,,,,,,,,139,,,,,,,,135,,,,,,,,135],f:[]}]},{i:[3,51,128,0,0,37,128,0,0,0,8,6,60,0,0,0,0,128,0,0,2,255,191,1,89,255,6,159,4],p:[1,1,1,2,1,1,1,2],c:[{n:[,,,,,,,,,,,,132,139,,,,,,,,142,132,,,,,,,,,,,,,,,,,,,127,,,,,,,,130],f:[]},{n:[,,,,,,,,,,,,132,139,,,,,,,,142,132,,132,144,132,146,132,147,132,147,,,,,,,,,,,,,,127,,,,,,,,130],f:[]}]},{i:[2,51,128,0,1,56,128,3,0,0,85,0,91,0,0,0,3,176,5,1,3,60,134,5,21,147,3,128,6],p:[1,2,3,4,2,5,6,4],c:[{n:[,,,,,,,,,,,,,,,,,,,,,,,,144],f:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,85]},{n:[144,,,,,,,,147,,,,,,,,144],f:[]},{n:[144,,,,,,,,142,,,,,,,,144],f:[]},{n:[144,,,,,,,,147,,,,146,,,,144],f:[]},{n:[132,,,,,,,,135,,,,,,,,132],f:[]},{n:[132,,,,,,,,130,,,,,,,,132],f:[]}]}],rowLen:11025,patternLen:32,endPattern:7,numChannels:4},nt={...Mt},rt={...Mt,songData:[...Mt.songData,{i:[0,0,140,0,0,0,140,0,0,81,4,10,47,55,0,0,0,187,5,0,1,239,135,0,15,108,5,16,4],p:[1,1,1,1,1,1,1,1],c:[{n:[147,147,147,147,147,147,147,147,147,147,147,147,147,147,147,147,147,147,147,147,147,147,147,147,147,147,147,147,147,147,147,147],f:[]}]},{i:[0,159,116,85,0,156,116,0,37,14,4,6,73,99,0,0,0,0,0,0,2,136,15,0,32,0,0,0,6],p:[1,1,1,1,1,1,1,1],c:[{n:[135,,,135,,135,,135,135,,,135,,135,,135,135,,,135,,135,,135,135,,,135,,135,,135,,,,,147,,,147,,,,,147,,,147,,,,,147,,,147,,,,,147,,,147],f:[]}]}],numChannels:6};let lt=!1,it={"gong-trigger":{songData:[{i:[0,255,152,0,0,255,152,12,0,0,2,0,60,0,0,0,0,0,0,0,2,255,0,0,32,47,3,157,2],p:[1],c:[{n:[123],f:[]}]}],rowLen:5513,patternLen:32,endPattern:0,numChannels:1},fall:{songData:[{i:[0,128,106,64,0,127,106,12,64,16,0,0,134,0,0,0,0,0,0,0,2,24,169,5,71,83,5,0,0],p:[1],c:[{n:[164],f:[]}]}],rowLen:7350,patternLen:32,endPattern:0,numChannels:1},crate:{songData:[{i:[0,0,140,0,0,0,140,0,0,255,11,28,59,0,0,0,0,51,2,1,2,58,31,0,32,88,1,39,2],p:[1],c:[{n:[132],f:[]}]}],rowLen:5513,patternLen:32,endPattern:0,numChannels:1},key:{songData:[{i:[0,255,152,0,0,255,152,12,0,0,12,17,28,0,0,0,0,0,0,0,2,255,0,0,32,47,3,0,0],p:[1],c:[{n:[135,147],f:[]}]}],rowLen:7350,patternLen:32,endPattern:0,numChannels:1},spawn:{songData:[{i:[2,64,128,0,2,64,140,14,0,0,7,20,28,0,0,0,0,97,4,1,3,49,154,0,109,107,4,93,2],p:[1],c:[{n:[135,139,142,147],f:[]}]}],rowLen:6014,patternLen:32,endPattern:0,numChannels:1}},ot={};function at(e){ot[e]&&(ot[e].currentTime=0,ot[e].play())}let ct={gender:0,skin:0,hair:0,outfit:0};const st={gender:["boy","girl"],skin:i,hair:o,outfit:a};let Yt=["gender","skin","hair","outfit"],ft=0;let Nt=!1;function ut(){const e=S.value,t=parseInt(Q.value);ie(c[e].tiles[0],c[e].co,T.x,T.y,{o:c[e].cCO||c[e].useOrientationForColor?t:q,useOrientationForColor:c[e].useOrientationForColor,scale:1,flipHorizontally:!1,alpha:.5})}function gt(e){if(1===e.buttons){if(!ce(T.x,T.y)&&ae(T.x,T.y)){fe(S.value,T.x,T.y,{o:c[S.value].cCO||c[S.value].useOrientationForColor?parseInt(Q.value):q});W(p[J].levelData)}}else if(2===e.buttons){let e=ce(T.x,T.y);e&&(Ye(e.tile,T.x,T.y),W(p[J].levelData))}}e("#editorTestLevelButton").addEventListener("click",(()=>{if(!function(){let e=p[J].levelData,t=0,M=0;e.forEach((e=>{"spawn-current"===e.tile?t++:"flag"===e.tile&&M++}));let n="",r=1===t&&1===M;r||(1!==t&&(n+="There must be exactly one player spawn point.\n"),1!==M&&(n+="There must be exactly one flag.\n"));return ht.textContent=n,r}())return;let e=W(p[J].levelData);window.open(`./index.html?level=${e}`)}));let ht=e("#editorMessage");function dt(){G=Math.min(Math.floor(window.innerWidth/(f*s)),Math.floor(.89*window.innerHeight/(N*s))),v.width=f*s*G,v.height=N*s*G,w.width=v.width,w.height=1.1*s*G,window.innerWidth/window.innerHeight>f/N?(y.width=window.innerWidth,y.height=window.innerWidth*(N/f)):(y.height=window.innerHeight,y.width=window.innerHeight*(f/N))}function At(e){document.body.classList.remove(k),document.body.classList.add(e),k=e,"game"===k&&oe(J),"editor"===k&&(J=0,oe(J),Object.keys(c).forEach((e=>{if(0!==c[e].limit){let t=document.createElement("option");t.value=e,t.text=e,S.appendChild(t)}})))}function qt(){var e,t;e=ee(nt),t=ee(rt),te(e),R.addEventListener("ended",(function(){te(t,!0)})),R.play()}window.addEventListener("resize",(()=>{dt(),re("s","rock")})),function(){O.imageSmoothingEnabled=!1,x.imageSmoothingEnabled=!1,b.imageSmoothingEnabled=!1,dt();const e=new URLSearchParams(window.location.search).get("level");if(e){let t=K(e);t&&(p.push(t),J=p.length-1,At("game"))}else At(k);!function(){for(let t in it){let M=document.createElement("audio"),n=new B;for(n.init(it[t]);n.generate()<1;);var e=n.createWave();M.src=URL.createObjectURL(new Blob([e],{type:"audio/wav"})),ot[t]=M}}(),qt(),requestAnimationFrame(tt)}();let Zt=null!==M("currentLevel");const Lt=[{text:"CONTINUE",action:"continue",isDisabled:!Zt},{text:"NEW GAME",action:"newGame",isDisabled:!1},{text:"LEVEL EDITOR",action:"levelEditor",isDisabled:!1}];let Et=Zt?0:1;function pt(){let e=new Image;if(e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAACgAgMAAABWEiUVAAAACVBMVEUBOZocAGYAkMzM6PIZAAAARklEQVQY02MIJROKAnEgEAvCaDB2BeIQIHaBY0YkWgCIGcCYBYgd4DQtQAMQcwBxBxgrALESGK8A4i4gXgXGi4BYC4jJhgDoJyriwWJx+QAAAABJRU5ErkJggg==",e.height){let t=b.canvas.height/e.height,M=b.canvas.height,n=e.width*t,r=document.createElement("canvas");r.width=n,r.height=M;let l=r.getContext("2d");l.imageSmoothingEnabled=!1,l.drawImage(e,0,0,n,M);for(let e=0;e<b.canvas.width;e+=n)b.drawImage(r,e,0,n,M)}O.drawImage(y,0,0,v.width,v.height)}}();</script></div></body></html>